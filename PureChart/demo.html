<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PureChart Demo - JSON Loading</title>
    <link rel="stylesheet" href="PureChart.css">
</head>
<body>
    <h1>PureChart Demonstration - Loading from JSON</h1>

    <div class="chart-container">
        <h2>Bar Chart</h2>
        <canvas id="barChartCanvas" width="700" height="350"></canvas>
    </div>

    <div class="chart-container">
        <h2>Line Chart</h2>
        <canvas id="lineChartCanvas" width="700" height="350"></canvas>
    </div>

    <div class="chart-container">
        <h2>Percentage Distribution (New "Gauge" Style)</h2>
        <canvas id="percentageChartNewStyleCanvas" width="700" height="220"></canvas>
    </div>

    <div class="chart-container">
        <h2>Percentage Distribution (Classic Style)</h2>
        <canvas id="percentageChartOldStyleCanvas" width="700" height="220"></canvas>
    </div>

    <script src="PureChart.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const jsonDataUrl = 'sample-data.json';

            try {
                const response = await fetch(jsonDataUrl);
                if (!response.ok) {
                    throw new Error(`HTTP error loading ${jsonDataUrl}: ${response.status}`);
                }
                const allChartConfigs = await response.json();

                if (allChartConfigs.barChartConfig) {
                    new PureChart('barChartCanvas', allChartConfigs.barChartConfig);
                } else { console.warn("'barChartConfig' configuration not found in JSON."); }

                if (allChartConfigs.lineChartConfig) {
                    new PureChart('lineChartCanvas', allChartConfigs.lineChartConfig);
                } else { console.warn("'lineChartConfig' configuration not found in JSON."); }
                
                if (allChartConfigs.percentageChartNewStyle) {
                    new PureChart('percentageChartNewStyleCanvas', allChartConfigs.percentageChartNewStyle);
                } else { console.warn("'percentageChartNewStyle' configuration not found in JSON."); }

                if (allChartConfigs.percentageChartOldStyle) {
                    new PureChart('percentageChartOldStyleCanvas', allChartConfigs.percentageChartOldStyle);
                } else { console.warn("'percentageChartOldStyle' configuration not found in JSON."); }

            } catch (error) {
                console.error("Error loading or creating charts from JSON:", error);
                document.body.insertAdjacentHTML('beforeend', `<p style="color:red; text-align:center;">Error loading chart data: ${error.message}</p>`);
            }
        });
    </script>
</body>
</html>
