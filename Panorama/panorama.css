/* 
  The following html, body, and #app-container styles are for page layout.
  In a larger application, these might be in a global stylesheet or specific demo HTML files.
  For this component's demo, they are included here for convenience.
*/
html, body {
  height: 100%;
  width: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden; /* To prevent viewport scrollbars if nested elements manage their own scroll */
  box-sizing: border-box;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* Moved body font here */
  background-color: #f4f7f6; /* Moved body background here */
  color: #333; /* Moved body color here */
}

*, *::before, *::after {
  box-sizing: inherit; /* Ensure all elements use border-box */
}

#app-container { /* This ID will need to be added to demo HTML, wrapping controls and dashboard-container */
  display: flex;
  flex-direction: column; /* Stack controls on top of dashboard area */
  height: 100%; /* Fill full viewport height */
  width: 100%; /* Fill full viewport width */
}

.controls { /* General styling for a controls section associated with Panorama */
  flex-shrink: 0; /* Prevent controls from shrinking */
  padding: 15px; 
  background-color: #fff; 
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  /* overflow-y: auto; /* Consider if controls area itself needs to scroll */
}

#dashboard-container { /* This ID is from demo HTML files */
  flex-grow: 1; /* Take remaining vertical space in #app-container */
  display: flex; 
  flex-direction: column; 
  padding: 10px; 
  background-color: #eef; /* From demo file, or choose a default */
  border: 1px solid #ccc; /* From demo file, or choose a default */
  overflow: auto; /* Add scroll if content (grid) overflows */
}

/* Panorama Component Specific Styles */
#panorama-container { /* This is the main container passed to the Panorama class constructor in demo.html, but #panorama-grid-container is the actual grid */
  /* This rule might be redundant if #dashboard-container is used as the main flex child for the dashboard area */
  /* For now, keeping it as it was, but it might need review based on HTML structure changes */
  padding: 20px; /* This was the original style, might conflict with new layout */
  flex-grow: 1; /* If this is meant to be the scrollable dashboard area */
  display: flex; /* If it's meant to contain the grid and make it grow */
  flex-direction: column;
}

/* Grid Container Styling */
#panorama-grid-container {
  flex-grow: 1; /* Allows the grid to take up available space in #dashboard-container */
  width: 100%;  /* Ensure it takes full width of #dashboard-container */
  background-color: #e9ecef; 
  border: 1px solid #ced4da; 
  border-radius: 4px;
  /* overflow: auto; /* Gridstack manages its own internal scroll/overflow typically */
}

/* Grid Item Styling */
.grid-stack-item {
  /* GridStack adds its own positioning, focus on content and appearance */
}

.grid-stack-item-content {
  background-color: #ffffff; /* White background for items */
  border: 1px solid #dee2e6; /* Light grey border for items */
  border-radius: 4px; /* Rounded corners for card-like appearance */
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05); /* Subtle shadow */
  padding: 15px; /* Padding within items */
  display: flex;
  flex-direction: column;
  justify-content: space-between; /* Pushes controls to bottom if content is short */
  overflow: auto; /* Allow scrolling for content that's too big */
  color: #495057; /* Default text color for items */
  text-align: left; /* Default text alignment */
}

/* Item Controls (Edit/Delete buttons) */
.panorama-item-controls {
  padding: 8px 0 0 0; /* Padding above buttons */
  background-color: transparent; /* No separate background for the controls div itself */
  border-top: none; /* Remove previous border if any */
  display: flex;
  justify-content: flex-end; /* Align buttons to the right */
  gap: 8px; /* Space between buttons */
}

.panorama-item-controls button {
  background-color: #6c757d; /* Secondary button color */
  color: white;
  border: none;
  border-radius: 4px;
  padding: 5px 10px;
  cursor: pointer;
  font-size: 0.85em;
  transition: background-color 0.2s ease-in-out;
}

.panorama-item-controls button:hover {
  background-color: #5a6268; /* Darken on hover */
}

.panorama-item-controls .panorama-delete-button {
  background-color: #dc3545; /* Red for delete */
}

.panorama-item-controls .panorama-delete-button:hover {
  background-color: #c82333; /* Darker red on hover */
}

/* Specific Item Types Styling */
.grid-stack-item-content h1,
.grid-stack-item-content h2,
.grid-stack-item-content h3,
.grid-stack-item-content h4,
.grid-stack-item-content h5,
.grid-stack-item-content h6 {
  margin-top: 0;
  margin-bottom: 0.5rem;
  font-weight: 500;
  line-height: 1.2;
  color: #343a40; /* Darker color for titles */
}

.grid-stack-item-content p {
  margin-top: 0;
  margin-bottom: 1rem;
  line-height: 1.6;
}

.grid-stack-item-content img {
  max-width: 100%;
  height: auto;
  border-radius: 3px; /* Slight rounding for embedded images */
}

/* Modal Styling */
.panorama-modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 1050; /* Higher z-index for modals */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgba(0,0,0,0.5); /* Darker overlay */
}

.panorama-modal-content {
  background-color: #fefefe;
  margin: 5% auto; /* More top margin for better centering */
  padding: 25px;
  border: 1px solid #adb5bd;
  width: 50%; /* Narrower for a more focused modal */
  max-width: 700px; /* Max width for larger screens */
  border-radius: 5px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.3);
  display: flex;
  flex-direction: column;
}

.panorama-modal-header {
  padding-bottom: 15px;
  border-bottom: 1px solid #e9ecef;
  margin-bottom: 20px; /* Space between header and form area */
}

.panorama-modal-header h2 {
  margin: 0;
  font-size: 1.75rem;
  color: #343a40;
}

.panorama-modal-form-area {
  padding: 0; /* Remove default padding if not needed, rely on label/input margins */
  flex-grow: 1;
  margin-bottom: 20px; /* Space before footer */
}

.panorama-modal-form-area label {
  display: block;
  margin-top: 15px;
  margin-bottom: 5px; /* Space between label and input */
  font-weight: 600;
  color: #495057;
}

.panorama-modal-form-area input[type="text"],
.panorama-modal-form-area input[type="number"],
.panorama-modal-form-area textarea,
.panorama-modal-input, /* Generic class for inputs if added in JS */
.panorama-modal-textarea { /* Generic class for textareas */
  width: 100%; /* Full width */
  padding: 10px;
  margin-top: 0; /* Remove top margin as label provides it */
  border: 1px solid #ced4da;
  border-radius: 4px;
  box-sizing: border-box;
  font-size: 1rem;
  line-height: 1.5;
}

.panorama-modal-form-area textarea,
.panorama-modal-textarea {
  min-height: 120px;
  resize: vertical;
}

.panorama-modal-form-area input[type="text"]:focus,
.panorama-modal-form-area input[type="number"]:focus,
.panorama-modal-form-area textarea:focus,
.panorama-modal-input:focus,
.panorama-modal-textarea:focus {
  border-color: #80bdff;
  outline: 0;
  box-shadow: 0 0 0 0.2rem rgba(0,123,255,.25);
}

.panorama-modal-footer {
  padding-top: 20px;
  border-top: 1px solid #e9ecef;
  text-align: right;
  display: flex;
  justify-content: flex-end;
  gap: 10px; /* Space between footer buttons */
}

.panorama-modal-footer button {
  padding: 10px 20px;
  cursor: pointer;
  border-radius: 4px;
  font-size: 1rem;
  font-weight: 500;
  transition: opacity 0.2s ease-in-out;
}

.panorama-modal-footer button:hover {
  opacity: 0.85;
}

.panorama-modal-save {
  background-color: #28a745; /* Green */
  color: white;
  border: none;
}

.panorama-modal-cancel {
  background-color: #6c757d; /* Secondary/grey for cancel */
  color: white;
  border: none;
}

/* Ensure GridStack resize handles are visible if needed */
.ui-resizable-handle {
  z-index: 20; /* Ensure handles are above content but below modal */
}

/* Helper class for JSON text in modal */
.panorama-modal-form-area textarea#editJsonConfig {
  font-family: "Courier New", Courier, monospace;
  font-size: 0.9em;
  background-color: #f8f9fa; /* Slightly different background for code */
  color: #212529;
}

/* Basic styling for placeholder text within items */
.grid-stack-item-content > p:empty::before {
    content: "Empty text item";
    color: #adb5bd;
    font-style: italic;
}
.grid-stack-item-content > div[id^="chart-container-"]:empty::before {
    content: "Empty chart item";
    color: #adb5bd;
    font-style: italic;
    display: block; /* Ensure it takes space */
    text-align: center;
    padding-top: 20px; /* Some spacing */
}
.grid-stack-item-content > div[id^="table-container-"]:empty::before {
    content: "Empty table item";
    color: #adb5bd;
    font-style: italic;
    display: block; /* Ensure it takes space */
    text-align: center;
    padding-top: 20px; /* Some spacing */
}
